<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../../../css/reset.css">
    <title>2.6 Chương trình gồm nhiều file</title>
    <link rel="stylesheet" href="../../../css/substyle.css">
    <link rel="shortcut icon" href="../../../img/circle-logo.ico">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="../../../js/showhide.js"></script>
</head>

<body>
    <div class="title">
        <h1>2.6 Chương trình gồm nhiều file</h1>
    </div>

    <div class="content">

        <p>Xét hai file với các dòng code sau (lưu ý hai file này phải nằm chung một project):</p>
        <p>add.cpp</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border-radius:10px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #2b91af">int</span> add(<span style="color: #2b91af">int</span> x, <span style="color: #2b91af">int</span> y)
{
    <span style="color: #0000ff">return</span> x + y;
}
</pre></td></tr></table></div>

        <p>main.cpp</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border-radius:10px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4
5
6
7</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #0000ff">#include &lt;iostream&gt;</span>
 
<span style="color: #2b91af">int</span> main()
{
    std::cout &lt;&lt; <span style="color: #a31515">&quot;The sum of 3 and 4 is: &quot;</span> &lt;&lt; add(3, 4) &lt;&lt; <span style="color: #a31515">&#39;\n&#39;</span>; <span style="color: #008000">// compile error</span>
    <span style="color: #0000ff">return</span> 0;
}
</pre></td></tr></table></div>

        <p>Chạy chương trình trên sẽ xuất hiện lỗi.</p>
        <div class="codeblock"><pre><code>main.cpp(5) : error C3861: 'add': identifier not found</code></pre></div>
        <p>Lưu ý rằng trình biên dịch biên dịch các file riêng rẻ với nhau và không theo thứ tự. Nó không biết và không nhớ những nội dung ở các file khác khi đang biên dịch một file. Do đó, cho dù trình biên dịch biên dịch file add.cpp trước thì nó cũng không nhớ hàm add là gì.</p>
        <p>Để giải quyết vấn đề trên, ta dùng cách 2 ở bài học , đó là dùng khai báo trước.</p>
        <p>main.cpp</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border-radius:10px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4
5
6
7
8
9</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #0000ff">#include &lt;iostream&gt;</span>
 
<span style="color: #2b91af">int</span> add(<span style="color: #2b91af">int</span> x, <span style="color: #2b91af">int</span> y);    <span style="color: #008000">// khai báo hàm prototype</span>
 
<span style="color: #2b91af">int</span> main()
{
    std::cout &lt;&lt; <span style="color: #a31515">&quot;The sum of 3 and 4 is: &quot;</span> &lt;&lt; add(3, 4) &lt;&lt; <span style="color: #a31515">&#39;\n&#39;</span>;
    <span style="color: #0000ff">return</span> 0;
}
</pre></td></tr></table></div>

        <p>add.cpp</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border-radius:10px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #2b91af">int</span> add(<span style="color: #2b91af">int</span> x, <span style="color: #2b91af">int</span> y)   <span style="color: #008000">// định nghĩa hàm add</span>
{
    <span style="color: #0000ff">return</span> x + y;
}
</pre></td></tr></table></div>

        <p>Bây giờ, khi trình biên dịch biên dịch hàm main thì nó sẽ biết hàm add là gì. Linker sẽ kết nối phần gọi hàm add ở file main.cpp với phần định nghĩa hàm add trong add.cpp.</p>
        <p>Bằng cách này, ta có thể cho phép các file dùng các hàm ở nhiều file khác nhau.</p>
        <p>Hãy thử chạy chương trình trên xem có ra kết quả như dự đoán không nhé. Nếu có lỗi, bạn có thể bình luận ở dưới bài này.</p>
        <p>Hiện tại, bạn chỉ cần biết sơ qua cách thức hoạt động của chương trình có nhiều file. Sau này, chúng ta sẽ áp dụng nhiều vào lập trình hướng đối tượng.</p>
        <h3 class="muc">Bài tập</h3>
        <p>Chia chương trình dưới đây thành hai file (main.cpp và input.cpp). Trong đó, main.cpp chứa hàm main và input.cpp chứa hàm getInteger.</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border-radius:10px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #0000ff">#include &lt;iostream&gt;</span>
 
<span style="color: #2b91af">int</span> getInteger()
{
    std::cout &lt;&lt; <span style="color: #a31515">&quot;Enter an integer: &quot;</span>;
    <span style="color: #2b91af">int</span> x;
    std::cin &gt;&gt; x;
    <span style="color: #0000ff">return</span> x;
}
 
<span style="color: #2b91af">int</span> main()
{
    <span style="color: #2b91af">int</span> x = getInteger();
    <span style="color: #2b91af">int</span> y = getInteger();
 
    std::cout &lt;&lt; x &lt;&lt; <span style="color: #a31515">&quot; + &quot;</span> &lt;&lt; y &lt;&lt; <span style="color: #a31515">&quot; is &quot;</span> &lt;&lt; x + y &lt;&lt; <span style="color: #a31515">&#39;\n&#39;</span>;
    <span style="color: #0000ff">return</span> 0;
}
</pre></td></tr></table></div>

        <div id="answer1" style="display: none;">
            <p>input.cpp</p>
            <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border-radius:10px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4
5
6
7
8
9</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #0000ff">#include &lt;iostream&gt;    </span><span style="color: #008000">// ta cần include thư viện iostream để dùng std::cout và std::cin</span>
 
<span style="color: #2b91af">int</span> getInteger()     <span style="color: #008000">// định nghĩa hàm getInteger</span>
{
    std::cout &lt;&lt; <span style="color: #a31515">&quot;Enter an integer: &quot;</span>;
    <span style="color: #2b91af">int</span> x;
    std::cin &gt;&gt; x;
    <span style="color: #0000ff">return</span> x;
}
</pre></td></tr></table></div>

        <p>main.cpp</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border-radius:10px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #0000ff">#include &lt;iostream&gt;</span>
 
<span style="color: #2b91af">int</span> getInteger();    <span style="color: #008000">// forward declaration</span>
 
<span style="color: #2b91af">int</span> main()
{
    <span style="color: #2b91af">int</span> x = getInteger();
    <span style="color: #2b91af">int</span> y = getInteger();
 
    std::cout &lt;&lt; x &lt;&lt; <span style="color: #a31515">&quot; + &quot;</span> &lt;&lt; y &lt;&lt; <span style="color: #a31515">&quot; is &quot;</span> &lt;&lt; x + y &lt;&lt; <span style="color: #a31515">&#39;\n&#39;</span>;
    <span style="color: #0000ff">return</span> 0;
}
</pre></td></tr></table></div>

        </div>
        <button class="showhidebtn" onclick="showHide('#answer1')">Show/Hide</button>

        <div>
            <a href="../2-7-naming-collision-gioi-thieu-ve-namespace/index.html"><button class="btn">Bài tiếp theo</button></a>
        </div>
        <div>
            <a href="../../index.html"><button class="btn">C++ Index</button></a>
        </div>
        <div>
            <a href="../2-5-forward-declaration-va-dinh-nghia/index.html"><button class="btn">Bài trước</button></a>
        </div>

    </div>
</body>

</html>