<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../../../css/reset.css">
    <title>2.4 Giới thiệu về biến cục bộ</title>
    <link rel="stylesheet" href="../../../css/substyle.css">
    <link rel="shortcut icon" href="../../../img/circle-logo.ico">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="../../../js/showhide.js"></script>
</head>

<body>
    <div class="title">
        <h1>2.4 Giới thiệu về biến cục bộ</h1>
    </div>

    <div class="content">

        <h3 class="muc">Biến cục bộ</h3>
        <p>Tham số của hàm và các biến được khởi tạo trong thân hàm được gọi là biến cục bộ (local variable). Trong bài này, ta sẽ tìm hiểu về các thuộc tính của biến cục bộ.</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border-radius:10px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4
5
6</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #2b91af">int</span> add(<span style="color: #2b91af">int</span> x, <span style="color: #2b91af">int</span> y) <span style="color: #008000">// tham số x, y là biến cục bộ</span>
{
    <span style="color: #2b91af">int</span> z{ x + y }; <span style="color: #008000">// z cũng là biến cục bộ</span>
 
    <span style="color: #0000ff">return</span> z;
}
</pre></td></tr></table></div>

        <h3 class="muc">Phạm vi biến cục bộ</h3>
        <p>Trong C++, biến cục bộ có một “không gian sống” nhất định – được gọi là phạm vi cục bộ (local scope). Nó bắt đầu từ lúc biến được tạo ra đến khi biến bị tiêu hủy. Vậy cụ thể thì khi nào nó bị hủy? Biến cục bộ sẽ bị hủy ở cuối hàm, ngay khi gặp dấu ‘}’.</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border-radius:10px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #2b91af">int</span> add(<span style="color: #2b91af">int</span> x, <span style="color: #2b91af">int</span> y) <span style="color: #008000">// tham số x, y là biến cục bộ </span>
{ 
    <span style="color: #2b91af">int</span> z{ x + y }; <span style="color: #008000">// z cũng là biến cục bộ </span>

    <span style="color: #0000ff">return</span> z; 
}   <span style="color: #008000">// x, y và z bị hủy ngay tại đây</span>

<span style="color: #008000">/////////////////////////////////////////</span>

<span style="color: #0000ff">#include &lt;iostream&gt;</span>
 
<span style="color: #2b91af">void</span> doSomething()
{
    std::cout &lt;&lt; <span style="color: #a31515">&quot;Hello!\n&quot;</span>;
}
 
<span style="color: #2b91af">int</span> main()
{
    <span style="color: #2b91af">int</span> x{}; <span style="color: #008000">// phạm vi biến x bắt đầu từ đây</span>
 
    doSomething(); <span style="color: #008000">// x vẫn tồn tại</span>
 
    <span style="color: #0000ff">return</span> 0;
} <span style="color: #008000">// x bị hủy và mất đi</span>
</pre></td></tr></table></div>

        <p>Như vậy, phạm vi cục bộ chính là phạm vi mà biến cục bộ có hiệu lực.</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border-radius:10px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #0000ff">#include &lt;iostream&gt;</span>
 
<span style="color: #008000">// đây không phải phạm vi cục bộ của biến x</span>
<span style="color: #2b91af">void</span> doSomething()
{
    std::cout &lt;&lt; <span style="color: #a31515">&quot;Hello!\n&quot;</span>;
}
 
<span style="color: #2b91af">int</span> main()
{
    <span style="color: #008000">// đây không phải phạm vi cục bộ của biến x</span>
 
    <span style="color: #2b91af">int</span> x{}; <span style="color: #008000">// x trong phạm vi cục bộ và có thể sử dụng</span>
 
    doSomething();
 
    <span style="color: #0000ff">return</span> 0;
} <span style="color: #008000">// x ra khỏi phạm vi cục bộ và bị hủy</span>
</pre></td></tr></table></div>

        <h3 class="muc">Một ví dụ khác</h3>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border-radius:10px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #0000ff">#include &lt;iostream&gt;</span>
 
<span style="color: #2b91af">int</span> add(<span style="color: #2b91af">int</span> x, <span style="color: #2b91af">int</span> y) <span style="color: #008000">// x và y được tạo ra, local scope của x và y bắt đầu từ đây</span>
{
    <span style="color: #008000">// x và y trong local scope nên có thể dùng được</span>
    <span style="color: #0000ff">return</span> x + y;
} <span style="color: #008000">// x, y ra khỏi local scope và bị hủy </span>
 
<span style="color: #2b91af">int</span> main()
{
    <span style="color: #2b91af">int</span> a{ 5 };     <span style="color: #008000">// a được tạo ra, local scope của a bắt đầu từ đây</span>
    <span style="color: #2b91af">int</span> b{ 6 };     <span style="color: #008000">// b được tạo ra, local scope của b bắt đầu từ đây</span>
 
    <span style="color: #008000">// a và b trong local scope nên có thể dùng được</span>
    std::cout &lt;&lt; add(a, b) &lt;&lt; <span style="color: #a31515">&#39;\n&#39;</span>; <span style="color: #008000">// gọi hàm x = 5, y = 6</span>
 
    <span style="color: #0000ff">return</span> 0;
} <span style="color: #008000">// a, b ra khỏi local scope và bị hủy</span>
</pre></td></tr></table></div>

        <p>Nhiều bạn sẽ nghĩ rằng hàm add được gọi trong local scope của a và b nên cho return a + b luôn, cần gì tạo biến x, y. Tuy nhiên, nó không như bạn nghĩ. Local scope của một biến chỉ có ý nghĩa trong hàm mà nó được tạo ra chứ không bao gồm các hàm khác. Biến a và b chỉ tồn tại trong hàm main mà thôi. Mặc dù hàm add nằm trong local scope của a và b nhưng a và b không tồn tại trong hàm add. Chính vì vậy ta phải tạo tham số x, y.</p>
        <h3 class="muc">Biến cùng tên khác hàm</h3>
        <p>Ở ví dụ trên, bạn có thể dễ dàng thấy a, b khác x, y. Tuy nhiên, xét ví dụ dưới đây:</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border-radius:10px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #0000ff">#include &lt;iostream&gt;</span>
 
<span style="color: #2b91af">int</span> add(<span style="color: #2b91af">int</span> x, <span style="color: #2b91af">int</span> y)    <span style="color: #008000">// biến x và y của hàm add được tạo ra</span>
{
    <span style="color: #0000ff">return</span> x + y;
}    <span style="color: #008000">// biến x và y của hàm add bị hủy</span>
 
<span style="color: #2b91af">int</span> main()
{
    <span style="color: #2b91af">int</span> x{ 5 };   <span style="color: #008000">// biến x của hàm main được tạo ra</span>
    <span style="color: #2b91af">int</span> y{ 6 };   <span style="color: #008000">// biến y của hàm main được tạo ra</span>
 
    std::cout &lt;&lt; add(x, y) &lt;&lt; <span style="color: #a31515">&#39;\n&#39;</span>;    <span style="color: #008000">// sử dụng giá trị của biến x, y của hàm main làm đối số cho tham số x, y của hàm add</span>
 
    <span style="color: #0000ff">return</span> 0;
}   <span style="color: #008000">// biến x và y của hàm main bị hủy</span>
</pre></td></tr></table></div>

        <p>Chương trình trên chạy bình thường mặc dù cả hàm main và hàm add cùng có hai biến tên x và y. Tại sao vậy?</p>
        <p>Đầu tiên, ta cần biết rằng mặc dù hàm main và add đều có biến tên x, y, nhưng chúng được tách riêng và không liên quan gì với nhau.</p>
        <p>Thứ hai, biến sẽ được ưu tiên đối với local scope của nó. Do đó, trong hàm main sẽ ưu tiên dùng biến x, y của hàm main và trong hàm add sẽ ưu tiên dùng biến x, y của hàm add.</p>
        <p>Điều này rất có lợi cho việc đặt tên vì sẽ không phải mất thời gian nghĩ ra tên để không bị trùng.</p>
        <h3 class="muc">Bài tập</h3>
        <p>Hãy dự đoán chương trình sau in ra gì.</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border-radius:10px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #0000ff">#include &lt;iostream&gt;</span>
 
<span style="color: #2b91af">void</span> doIt(<span style="color: #2b91af">int</span> x)
{
    <span style="color: #2b91af">int</span> y{ 4 };
    std::cout &lt;&lt; <span style="color: #a31515">&quot;doIt: x = &quot;</span> &lt;&lt; x &lt;&lt; <span style="color: #a31515">&quot; y = &quot;</span> &lt;&lt; y &lt;&lt; <span style="color: #a31515">&#39;\n&#39;</span>;
 
    x = 3;
    std::cout &lt;&lt; <span style="color: #a31515">&quot;doIt: x = &quot;</span> &lt;&lt; x &lt;&lt; <span style="color: #a31515">&quot; y = &quot;</span> &lt;&lt; y &lt;&lt; <span style="color: #a31515">&#39;\n&#39;</span>;
}
 
<span style="color: #2b91af">int</span> main()
{
    <span style="color: #2b91af">int</span> x{ 1 };
    <span style="color: #2b91af">int</span> y{ 2 };
 
    std::cout &lt;&lt; <span style="color: #a31515">&quot;main: x = &quot;</span> &lt;&lt; x &lt;&lt; <span style="color: #a31515">&quot; y = &quot;</span> &lt;&lt; y &lt;&lt; <span style="color: #a31515">&#39;\n&#39;</span>;
 
    doIt(x);
 
    std::cout &lt;&lt; <span style="color: #a31515">&quot;main: x = &quot;</span> &lt;&lt; x &lt;&lt; <span style="color: #a31515">&quot; y = &quot;</span> &lt;&lt; y &lt;&lt; <span style="color: #a31515">&#39;\n&#39;</span>;
 
    <span style="color: #0000ff">return</span> 0;
}
</pre></td></tr></table></div>

        <div id="answer1" style="display: none;">
            <div class="codeblock">
                <pre><code>main: x = 1 y = 2
doIt: x = 1 y = 4
doIt: x = 3 y = 4
main: x = 1 y = 2</code></pre>
            </div>
            <p>Trình tự thực hiện như sau:</p>
            <ul>
                <li>Chương trình bắt đầu từ đầu hàm main</li>
                <li>Biến x của hàm main được khởi tạo với giá trị là 1</li>
                <li>Biến y của hàm main được khởi tạo với giá trị là 2</li>
                <li>std::cout in ra <i>main: x = 1 y = 2</i></li>
                <li>doIt được gọi với đối số là 1</li>
                <li>Tham số x của hàm doIt được tạo với giá trị là 1</li>
                <li>Biến y của hàm doIt được khởi tạo với giá trị là 4</li>
                <li>std::cout của hàm doIt in ra <i>doIt: x = 1 y = 4</i></li>
                <li>Biến x của hàm doIt được gán giá trị 3</li>
                <li>std::cout của hàm doIt in ra <i>doIt: x = 3 y = 4</i></li>
                <li>Biến x và y của hàm doIt bị phá hủy</li>
                <li>std::cout của hàm main in ra <i>main: x = 1 y = 2</i></li>
                <li>Hàm main trả giá trị 0 về hệ thống</li>
                <li>Biến x và y của hàm main bị phá hủy</li>
                <li>Chương trình kết thúc</li>
            </ul>
        </div>
        <button class="showhidebtn" onclick="showHide('#answer1')">Show/Hide</button>

        <div>
            <a href="../2-5-forward-declaration-va-dinh-nghia/index.html"><button class="btn">Bài tiếp theo</button></a>
        </div>
        <div>
            <a href="../../index.html"><button class="btn">C++ Index</button></a>
        </div>
        <div>
            <a href="../2-3-gioi-thieu-ve-tham-so-va-doi-so-cua-ham/index.html"><button class="btn">Bài trước</button></a>
        </div>

    </div>
</body>

</html>